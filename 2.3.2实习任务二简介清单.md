添加了修正商品信息的功能

主要的实现思路如下;

1. 菜单中提供给用户相应的选项

	```cpp
			switch(choice){
				case '1':
					doAddCommodity(cm);
					break;
				case '2':
					doRemoveCommodity(cm);
					break;
				case '3':
					doEditCommodity(cm);
					break;
				case '4':
					doViewCommodity(cm);
					break;
				case '5':
					doViewAllCommodity(cm);
					break;
				case '6':
					doCheckout(cm);
					break;
				default:
					cout<<"无效输入! 请重试!\n";
					break;
			}
	```

	

2. 调用doEditCommodity函数处理

	此函数获取用户输入的ID, 并做一定的除错处理

	```cpp
	void doEditCommodity(CommodityManage& cm){
		long id;
		cout<<"Input id:";
		cin>>id;
		while(getchar()!='\n');
		cm.editCommodity (id);
		return ;
	}
	```

3. doEditCommodity中调用CommodityManage的成员函数editCommodity进行处理:

  ```cpp
  void CommodityManage::editCommodity(int id){
  	Commodity *pCommodity=findCommodityById (id);
  	if(pCommodity==nullptr){
  		cout<<"编号为"<<id<<"的商品不存在!\n";
  		return ;
  	}
  #ifdef	DEBUG
  	pCommodity->output ();
  #endif
  	cout<<"输入需要修改的商品信息项: \n";
  	//todo: 调用commodity的成员函数进行修改, 此处使用多态调用
  	pCommodity->editInfo ();
  	return ;
  }
  ```

  其中调用findCommodityById检测ID是否存在, 并做相应的处理

  如果ID存在, 则此时pCommodity指向相应的商品

  再调用Commodity成员函数editInfo进行处理

  

4. editInfo函数为virtual函数, 以实现程序的多态功能

	```cpp
	void Commodity::editInfo(){
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	```

	每一个子类中都定义了editInfo, 其内容与基类相同, 只不过分别调用各自的函数
	
	```cpp
	void BargainCommodity::editInfo(){
	#ifdef DEBUG
		cerr<<"BargainCommodity\n";
	#endif
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	
	
	void NormalCommodity::editInfo(){
	#ifdef DEBUG
		cerr<<"NormalCommodity\n";
	#endif
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	
	void OverseaCommodity::editInfo(){
	#ifdef DEBUG
		cerr<<"OverseaCommodity\n";
	#endif
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	
	void SecondHandCommodity::editInfo(){
	#ifdef DEBUG
		cerr<<"SecondHandCommodity\n";
	#endif
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	```
	
	



5. editInfo调用printEditMenu()打印菜单给使用者:

	```cpp
	void Commodity::printEditMenu()const{
		printf (
					"%d) 商品名称\n"
					"%d) 商品价格\n"
					"%d) 商品数量\n"
					,NAME, PRICE, NUM);
		return ;
	}
	```
	
	每个子类中都有各自的printEditMenu覆盖基类的printEditMenu以实现多态, 并调用基类的printEditMenu, 以减少代码冗余:
	
	```cpp
	void BargainCommodity::printEditMenu(){
		Commodity::printEditMenu ();
		printf(
					"%d) 商品特价\n"
					,SPECIALPRICE);
		return ;
	}
	
	void NormalCommodity::printEditMenu(){
		Commodity::printEditMenu ();
		printf(
					"%d) 商品折扣\n"
					, DISCOUNT);
		return ;
	}
	
	void OverseaCommodity::printEditMenu(){
		Commodity::printEditMenu ();
		printf(
					"%d) 商品折扣\n"
					"%d) 商品关税\n"
					, DISCOUNT, TARIFF);
		return ;
	}
	
	void SecondHandCommodity::printEditMenu(){
		NormalCommodity::printEditMenu ();
		printf(
					"%d) 商品折旧程度\n"
					,DEPRECIATION);
		return ;
	}
	```
	
	其中, 打印的菜单的数字选项为定义在类内部的静态常量, 不同的子类中定义自己特有的属性的标志常量:
	
	```cpp
	//commodity基类
	static const int NAME=0, PRICE=1, NUM=2;
	
	//normalCommodity子类:
	static const int DISCOUNT=4;
	
	//overseaCommodity子类:
	static const int DISCOUNT=4, TARIFF=5;
	
	//secondHandCommodity子类:
	static const int DEPRECIATION=5;
	
	//bargainCommodity子类:
	static const int SPECIALPRICE=4;
	
	```
	
	这些常量作为菜单打印的同时, 也作为后头判定的标志, 方便区分与再扩充
	
	
	
6.   editInfo调用getChoois函数获取用户的选择, 并做一定的除错处理:

	```cpp
	int Commodity::getChoois() const{
		char choois=0;
		cin>>choois;
		while(getchar()!='\n');
		while(choois<'0'+NAME||choois>'0'+NUM){
			cout<<"非法输入, 请重试!\n";
			cin>>choois;
			while(getchar()!='\n');
		}
		choois-='0';
		return static_cast<int>(choois);
	}
	```

	每个子类中都getChoois函数覆盖基类中的定义, 以实现多态

	区别仅仅是while中的判定条件不同:

	```cpp
	int BargainCommodity::getChoois(){
		char choois=0;
		cin>>choois;
		while(getchar()!='\n');
		while(choois<'0'+NAME||choois>'0'+SPECIALPRICE){
			cout<<"非法输入, 请重试!\n";
			cin>>choois;
			while(getchar()!='\n');
		}
		choois-='0';
		return static_cast<int>(choois);
	}
	
	int NormalCommodity::getChoois(){
		char choois=0;
		cin>>choois;
		while(getchar()!='\n');
		while(choois<'0'+NAME||choois>'0'+DISCOUNT){
			cout<<"非法输入, 请重试!\n";
			cin>>choois;
			while(getchar()!='\n');
		}
		choois-='0';
		return static_cast<int>(choois);
	}
	
	int OverseaCommodity::getChoois(){
		char choois=0;
		cin>>choois;
		while(getchar()!='\n');
		while(choois<'0'+NAME||choois>'0'+TARIFF){
			cout<<"非法输入, 请重试!\n";
			cin>>choois;
			while(getchar()!='\n');
		}
		choois-='0';
		return static_cast<int>(choois);
	}
	
	int SecondHandCommodity::getChoois(){
		char choois=0;
		cin>>choois;
		while(getchar()!='\n');
		while(choois<'0'+NAME||choois>'0'+DEPRECIATION){
			cout<<"非法输入, 请重试!\n";
			cin>>choois;
			while(getchar()!='\n');
		}
		choois-='0';
		return static_cast<int>(choois);
	}
	```

7. editInfo调用judgeChoois函数实现判定选择并修改

	```cpp
	void Commodity::judgeChoois(int choois){
		switch(choois){
			case NAME:
				cout<<"输入商品名称: ";
				cin>>this->name;
				break;
			case PRICE:
				cout<<"输入商品价格: ";
				cin>>this->price;
				break;
			case NUM:
				cout<<"输入商品数量: ";
				cin>>this->num;
				break;
			default:
				break;
		}
		return ;
	}
	```

	其中每个子类中都有judgeChoois的定义, 覆盖基类函数实现多态, 并且子类judgeChoois函数调用基类的judgeChoois函数, 减少代码冗余:

	```cpp
	void BargainCommodity::judgeChoois(int choois){
		Commodity::judgeChoois (choois);
		switch (choois) {
			case SPECIALPRICE:
				cout<<"输入商品特价: ";
				cin>>this->specialPrice;
				break;
			default:
				break;
		}
		return ;
	}
	
	void NormalCommodity::judgeChoois(int choois){
		Commodity::judgeChoois (choois);
		switch (choois) {
			case DISCOUNT:
				cout<<"输入商品折扣: ";
				cin>>this->discount;
				break;
			default:
				break;
		}
		return ;
	}
	
	void OverseaCommodity::judgeChoois(int choois){
		Commodity::judgeChoois (choois);
		switch (choois) {
			case DISCOUNT:
				cout<<"输入商品折扣: ";
				cin>>this->discount;
				break;
			case TARIFF:
				cout<<"输入商品关税: ";
				cin>>this->tariff;
				break;
			default:
				break;
		}
		return ;
	}
	
	void SecondHandCommodity::judgeChoois(int choois){
		NormalCommodity::judgeChoois (choois);
		switch (choois) {
			case DEPRECIATION:
				cout<<"输入折旧程度: ";
				cin>>this->depreciation;
				break;
			default:
				break;
		}
		return ;
	}
	```

	


8. editInfo函数输出最后修改后的信息供以校对

	调用现成的output函数
	
	```cpp
	void Commodity::editInfo(){
		this->printEditMenu ();
		this->judgeChoois (this->getChoois ());
		cout<<"修改后的商品如下: \n";
		this->output ();
		return ;
	}
	```
	
	



_____

以上...

本实习任务总耗时3.5h

2019-12-25 12:45:18