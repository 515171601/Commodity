

本部分添加了按照购买数量和商品价格的两种排序方式

- 将菜单单独分离出来作为CommodityManage的私有成员函数, 方便修改:

	```cpp
	void CommodityManage::printSortMenu() const{
		printf(
					"指定排序方式: \n"
					"%d) 商品ID\n"
					"%d) 商品名称\n"
					"%d) 商品净价\n"
					"%d) 商品数量\n"
					"%d) 商品价格\n"
					"输入选择项: \n"
					, SORT_BY_ID, SORT_BY_NAME, SORT_BY_TOTAL_PRICE
					, SORT_BY_NUM, SORT_BY_PRICE);
		return ;
	}
	```

- 使用定义在CommodityManage中的静态常量成员代替原有菜单选项中的Magic Number, 便于修改的同时, 防止出错

	```cpp
	static const int SORT_BY_ID=0, SORT_BY_NAME=1, 
		SORT_BY_TOTAL_PRICE=2,
		SORT_BY_NUM=3, SORT_BY_PRICE=4;
	```

- 添加sortCommodities中的选项, 使用STL泛型算法sort与lambda表达式作为排序方法

	```cpp
	void CommodityManage::sortCommodities(){
		switch(sortType){
			case SORT_BY_ID: //根据 id 排序
				sort(pCommodities.begin(),pCommodities.end(),
					 [=](Commodity* p1,Commodity* p2){
					return p1->getId()<p2->getId();
				});
				break;
			case SORT_BY_NAME: //根据名称排序
				sort(pCommodities.begin(),pCommodities.end(),
					 [=](Commodity* p1,Commodity* p2){
					bool flag=0;
					if(p1->getName()==p2->getName()){
						flag=(p1->getId()<p2->getId());
					}else{
						flag=(p1->getName()<p2->getName());
					}
					return flag;
				});
				break;
			case SORT_BY_TOTAL_PRICE: //根据净价排序
				sort(pCommodities.begin(),pCommodities.end(),
					 [=](Commodity* p1,Commodity* p2){
					return p1->getNetPrice()<p2->getNetPrice();
				});
				break;
			case SORT_BY_PRICE:
				sort(pCommodities.begin (), pCommodities.end (),
					 [=](Commodity* p1,Commodity* p2){
					return p1->getPrice ()<p2->getPrice ();
				});
				break;
			case SORT_BY_NUM:
				sort(pCommodities.begin (), pCommodities.end (),
					 [=](Commodity* p1,Commodity* p2){
					return p1->getNum ()<p2->getNum ();
				});
				break;
			default:
				break;
		}
	}
	```

- 修改了sortCommodities中SORT_BY_NAME的排序方式, 实现了商品名称相同的情况下再按照商品 Id 排序 

	```cpp
	case SORT_BY_NAME: //根据名称排序
				sort(pCommodities.begin(),pCommodities.end(),
					 [=](Commodity* p1,Commodity* p2){
					bool flag=0;
					if(p1->getName()==p2->getName()){
						flag=(p1->getId()<p2->getId());
					}else{
						flag=(p1->getName()<p2->getName());
					}
					return flag;
				});
				break;
	```

- 调整了Commodity中的getPrice函数, 将其设置为virtual, 而后在SecondHandCommodity类中覆盖此函数, 将返回的price设置为specialPrice, 便于上头SORT_BY_PRICE排序的进行

	特价商品中原先的价格没啥用, 显示的应该是其特价

	```cpp
	virtual std::string getInfo()const;
	```

	```cpp
	double BargainCommodity::getPrice() const{
		return this->specialPrice;
	}
	```

	




​	 